# 🍺 醉里看花 — One More Drink

> 一款融合教育性与娱乐性的互动式 Web 应用，通过可视化和游戏化手段，让用户直观了解酒精对人体的影响，提高健康饮酒意识。

⚠️ **免责声明**：本应用仅供科普娱乐，不鼓励饮酒，数据仅供参考，非医疗建议。

---

## 📋 项目概览

| 属性 | 说明 |
|------|------|
| **定位** | 健康科普 × 游戏化 × 社交传播 |
| **目标用户** | 18-35 岁年轻人、健康科普博主 |
| **核心价值** | 用趣味方式了解酒精危害，减少酒驾和过度饮酒 |
| **技术栈** | Vite + React + TypeScript |
| **UI 风格** | 深色酒吧氛围 · Q版器官拟人 · 温暖警示配色 |

---

## 🎮 核心功能模块

### Phase 1 — MVP（当前阶段）
- [x] 项目初始化与文档
- [ ] **角色创建**：性别、体重、年龄、空腹状态、酒量自评
- [ ] **饮酒模拟**：酒品选择、喝酒动画、累计计算
- [ ] **BAC 计算引擎**：基于 Widmark 公式的血液酒精浓度计算
- [ ] **器官状态展示**：大脑🧠、肝脏、胃、心脏❤️、肾脏的拟人化状态
- [ ] **互动小游戏**：打地鼠（反应力测试，醉酒前后对比）

### Phase 2 — AI 增强
- [ ] 集成 AI 大模型（可选接入不同供应商）
- [ ] 酒后真言生成器
- [ ] 器官智能对话系统
- [ ] 个性化健康建议

### Phase 3 — 游戏化
- [ ] 剧情模式（朋友聚会 / 职场应酬 / 酒驾选择）
- [ ] 多结局系统（完美 / 宿醉 / 失态 / 悲剧）
- [ ] 成就系统

### Phase 4 — 社交功能
- [ ] 分享卡片生成（器官吐槽 / 酒量等级 / 前后对比）
- [ ] 挑战好友 & PK 模式
- [ ] 排行榜

### Phase 5 — 长期追踪
- [ ] "10年后的你"长期饮酒影响模拟
- [ ] 戒酒挑战 & 器官康复动画

---

## 🧮 核心算法

### Widmark 公式 — 血液酒精浓度（BAC）

```
酒精摄入(g) = 饮品容量(ml) × 酒精度(%) × 0.789

男性 BAC = 酒精(g) / (体重kg × 0.68) × 100
女性 BAC = 酒精(g) / (体重kg × 0.55) × 100

空腹时吸收速度 ×1.3
代谢速率：~0.015% / 小时（受年龄、性别影响）
```

### BAC 等级与状态映射

| BAC 范围 | 状态 | 表现 |
|----------|------|------|
| < 0.02% | 微醺 | 面色微红 |
| 0.02-0.05% | 轻度醉酒 | 话多、兴奋 |
| 0.05-0.08% | 中度醉酒 | 反应迟钝 |
| 0.08-0.15% | 重度醉酒 | 步态不稳（⚠️ 法定醉驾线 0.08%） |
| > 0.15% | 危险 | 意识模糊，可能昏迷 |

---

## 🍷 酒品数据库

| 酒类 | 图标 | 容量(ml) | 酒精度(%) |
|------|------|----------|-----------|
| 啤酒 | 🍺 | 330 | 3.5 |
| 红酒 | 🍷 | 150 | 12 |
| 白酒（二锅头） | 🥃 | 50 | 56 |
| 威士忌 | 🥃 | 40 | 40 |
| 鸡尾酒 | 🍹 | 200 | 15 |
| Long Island | 🍹 | 250 | 22 |
| 清酒 | 🍶 | 100 | 15 |
| 伏特加 | 🍸 | 40 | 40 |

---

## 🫀 器官系统设计

每个器官具有独立的状态响应：

- **大脑** 🧠：判断力→协调性→记忆→意识，逐步退化
- **肝脏**：代谢 7-10g/h，超负荷时发红冒烟，台词："我真的顶不住了！"
- **胃**：胃黏膜刺激，空腹加重，"求求你吃点东西垫垫底..."
- **心脏** ❤️：心率 60-100 升至 100-140，血管扩张
- **肾脏**：利尿增强，脱水风险，疲惫过滤

点击器官可查看详细科普知识。

---

## 🤖 AI 集成设计（供应商无关）

采用适配器模式，支持灵活切换不同 AI 供应商：

```
AIProvider (接口)
  ├── OpenAIProvider
  ├── ClaudeProvider
  ├── 通义千问Provider
  ├── 文心一言Provider
  └── 本地模型Provider（Ollama等）
```

**AI 应用场景：**
1. **酒后真言生成**：将正常话转换为醉话（语无伦次、重复、情绪化）
2. **器官对话生成**：拟人化器官间的幽默吐槽
3. **健康建议生成**：基于用户数据的个性化建议
4. **剧情分支生成**：动态故事线和个性化结局

配置方式：通过环境变量 `VITE_AI_PROVIDER` 和 `VITE_AI_API_KEY` 指定。

---

## 🎨 视觉设计规范

| 设计属性 | 值 |
|----------|-----|
| 主色 | `#FF6B6B` 警示红 |
| 辅色 | `#4ECDC4` 清新蓝 |
| 背景 | `#1A1A2E` 深色酒吧氛围 |
| 强调色 | `#FFD93D` 黄色提示 |
| 风格 | 插画 Q 版 · 器官拟人 · 温暖但有警示性 |
| 字体 | Noto Sans SC / Inter |

### 交互动效
- 点击酒杯 → 倾斜动画 → 液体减少 → 酒精分子飘入
- 器官反应 → 表情变化 + 震动
- BAC 进度条上升 → 危险色彩渐变
- 醉酒程度影响 UI：屏幕晃动、模糊滤镜

---

## 📱 页面流程

```
启动页（年龄确认 18+）
  ↓
创建角色（性别/体重/年龄/空腹/酒量）
  ↓
选择模式
  ├─ 快速模拟（直接喝酒）
  ├─ 剧情模式（故事线）
  └─ 长期模拟（10 年预测）
  ↓
饮酒界面（选酒/器官状态/互动游戏/实时数据）
  ↓
结果页（总结报告/健康建议/分享卡片/再玩一次）
```

---

## 🔬 科普知识库

- 为什么有人"一喝就倒"？（乙醛脱氢酶 ALDH2 基因）
- 解酒药真的有用吗？（大多是安慰剂）
- 酒后为什么会断片？（海马体受损）
- 红酒真的养生吗？（适量 vs 风险）
- 宿醉的科学原理（脱水、乙醛、炎症）
- 不同国家的酒驾标准对比

---

## ⚖️ 合规与伦理

- ✅ 进入页面需确认年满 18 岁
- ✅ 明确标注"不鼓励饮酒"
- ✅ 酒驾场景必须强调违法与危险
- ✅ 医疗免责声明
- ✅ 器官对话避免低俗/血腥
- ✅ 结果页必须包含健康提示

---

## 🚀 快速开始

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

---

## 📁 项目结构（规划）

```
src/
├── components/          # 可复用 UI 组件
│   ├── character/       # 角色创建相关
│   ├── drinks/          # 酒品选择与动画
│   ├── organs/          # 器官状态展示
│   ├── games/           # 互动小游戏
│   └── ui/              # 通用 UI 组件
├── engine/              # 核心计算引擎
│   ├── bac.ts           # BAC 计算
│   ├── metabolism.ts    # 代谢模型
│   └── organs.ts        # 器官状态
├── ai/                  # AI 集成（适配器模式）
│   ├── provider.ts      # 供应商接口
│   └── prompts.ts       # Prompt 模板
├── data/                # 静态数据
│   ├── drinks.ts        # 酒品数据库
│   └── knowledge.ts     # 科普知识
├── hooks/               # 自定义 React Hooks
├── pages/               # 页面组件
├── styles/              # 全局样式
├── types/               # TypeScript 类型
└── utils/               # 工具函数
```

---

## 📜 License

MIT
